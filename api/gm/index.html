<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="google-site-verification" content="OKMYmcVuMfm9H_UjfNXPzRb2c0QoBtmZ7v1KwHNXnRQ"><link rel="icon" type="image/png" href="/_astro/vm.C4h557K-.png"><meta name="generator" content="Astro v5.1.5"><title>Privileged APIs - Violentmonkey</title><script type="text/partytown" async src="https://www.googletagmanager.com/gtag/js?id=G-2E0X3LSCBM"></script> <script type="text/partytown">
  window.dataLayer = window.dataLayer || [];
  function gtag() {
    dataLayer.push(arguments);
  }
  gtag('js', new Date());

  gtag('config', 'G-2E0X3LSCBM');
</script><link rel="stylesheet" href="/_astro/_path_.su7zF9cu.css">
<style>aside[data-astro-cid-ssfzsv2f]{position:fixed;top:var(--nav-height);left:0;bottom:0;z-index:20;width:var(--aside-width);--un-translate-x:-100%;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z));border-right-width:1px;--un-border-opacity:1;border-color:rgb(229 231 235 / var(--un-border-opacity));--un-bg-opacity:1;background-color:rgb(255 255 255 / var(--un-bg-opacity));transition-property:transform;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}aside[data-astro-cid-ssfzsv2f] a[data-astro-cid-ssfzsv2f]:not(.active):not(:hover){--un-text-opacity:1;color:rgb(107 114 128 / var(--un-text-opacity))}@media (min-width: 1024px){aside[data-astro-cid-ssfzsv2f]{position:sticky;grid-row-start:1;grid-row-end:3;max-height:calc(100vh - var(--nav-height));--un-translate-x:0;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z));border-style:none;transition:none}}aside[data-astro-cid-ssfzsv2f]:target{--un-translate-x:0;--un-translate-y:0;transform:translate(var(--un-translate-x)) translateY(var(--un-translate-y)) translateZ(var(--un-translate-z)) rotate(var(--un-rotate)) rotateX(var(--un-rotate-x)) rotateY(var(--un-rotate-y)) rotate(var(--un-rotate-z)) skew(var(--un-skew-x)) skewY(var(--un-skew-y)) scaleX(var(--un-scale-x)) scaleY(var(--un-scale-y)) scaleZ(var(--un-scale-z))}aside[data-astro-cid-ssfzsv2f] .backdrop[data-astro-cid-ssfzsv2f]{display:none;font-size:0}aside[data-astro-cid-ssfzsv2f]:target .backdrop[data-astro-cid-ssfzsv2f]{position:absolute;top:0;bottom:0;left:100%;display:block;width:100vw;background-color:#a1a1aacc}@media (min-width: 1024px){aside[data-astro-cid-ssfzsv2f]:target .backdrop[data-astro-cid-ssfzsv2f]{display:none}}
</style><script>!(function(w,p,f,c){if(!window.crossOriginIsolated && !navigator.serviceWorker) return;c=w[p]=Object.assign(w[p]||{},{"lib":"/~partytown/","debug":false});c[f]=(c[f]||[]).concat(["dataLayer.push"])})(window,'partytown','forward');/* Partytown 0.11.0 - MIT QwikDev */
const t={preserveBehavior:!1},e=e=>{if("string"==typeof e)return[e,t];const[n,r=t]=e;return[n,{...t,...r}]},n=Object.freeze((t=>{const e=new Set;let n=[];do{Object.getOwnPropertyNames(n).forEach((t=>{"function"==typeof n[t]&&e.add(t)}))}while((n=Object.getPrototypeOf(n))!==Object.prototype);return Array.from(e)})());!function(t,r,o,i,a,s,c,l,d,p,u=t,f){function h(){f||(f=1,"/"==(c=(s.lib||"/~partytown/")+(s.debug?"debug/":""))[0]&&(d=r.querySelectorAll('script[type="text/partytown"]'),i!=t?i.dispatchEvent(new CustomEvent("pt1",{detail:t})):(l=setTimeout(v,(null==s?void 0:s.fallbackTimeout)||1e4),r.addEventListener("pt0",w),a?y(1):o.serviceWorker?o.serviceWorker.register(c+(s.swPath||"partytown-sw.js"),{scope:c}).then((function(t){t.active?y():t.installing&&t.installing.addEventListener("statechange",(function(t){"activated"==t.target.state&&y()}))}),console.error):v())))}function y(e){p=r.createElement(e?"script":"iframe"),t._pttab=Date.now(),e||(p.style.display="block",p.style.width="0",p.style.height="0",p.style.border="0",p.style.visibility="hidden",p.setAttribute("aria-hidden",!0)),p.src=c+"partytown-"+(e?"atomics.js?v=0.11.0":"sandbox-sw.html?"+t._pttab),r.querySelector(s.sandboxParent||"body").appendChild(p)}function v(n,o){for(w(),i==t&&(s.forward||[]).map((function(n){const[r]=e(n);delete t[r.split(".")[0]]})),n=0;n<d.length;n++)(o=r.createElement("script")).innerHTML=d[n].innerHTML,o.nonce=s.nonce,r.head.appendChild(o);p&&p.parentNode.removeChild(p)}function w(){clearTimeout(l)}s=t.partytown||{},i==t&&(s.forward||[]).map((function(r){const[o,{preserveBehavior:i}]=e(r);u=t,o.split(".").map((function(e,r,o){var a;u=u[o[r]]=r+1<o.length?u[o[r]]||(a=o[r+1],n.includes(a)?[]:{}):(()=>{let e=null;if(i){const{methodOrProperty:n,thisObject:r}=((t,e)=>{let n=t;for(let t=0;t<e.length-1;t+=1)n=n[e[t]];return{thisObject:n,methodOrProperty:e.length>0?n[e[e.length-1]]:void 0}})(t,o);"function"==typeof n&&(e=(...t)=>n.apply(r,...t))}return function(){let n;return e&&(n=e(arguments)),(t._ptf=t._ptf||[]).push(o,arguments),n}})()}))})),"complete"==r.readyState?h():(t.addEventListener("DOMContentLoaded",h),t.addEventListener("load",h))}(window,document,navigator,top,window.crossOriginIsolated);;(e=>{e.addEventListener("astro:before-swap",e=>{let r=document.body.querySelector("iframe[src*='/~partytown/']");if(r)e.newDocument.body.append(r)})})(document);</script></head> <body> <header class="sticky top-0 left-0 right-0 bg-white z-10"> <nav> <a href="/" class="nav-icon sm:hidden"> <svg viewBox="0 0 24 24"> <path d="M12 0l-12 12h4v12h5v-8h6v8h5v-12h4z"></path> </svg> </a> <a class="nav-icon lg:hidden" href="#violentmonkey/sidebar"> <svg viewBox="0 0 24 24"> <path d="M0 4h24v2h-24zm0 8h24v2h-24zm0 8h24v2h-24z"></path> </svg> </a> <a href="/" class="brand hidden sm:block"> Violentmonkey </a> <span class="flex-1"></span> <div class="overflow-auto min-w-0 flex whitespace-no-wrap"> <a class="nav-item " href="/get-it/"> Get it </a><a class="nav-item " href="/guide/creating-a-userscript/"> Guide </a><a class="nav-item active" href="/api/gm/"> API </a><a class="nav-item " href="/faq/"> FAQ </a><a class="nav-item " href="/posts/"> Blog </a> </div> </nav> <div class="w-full h-px"> <div class="w-full h-full origin-left bg-yellow-500 scale-x-0" data-scroll-indicator></div> </div> <script type="module" src="/_astro/ScrollIndicator.astro_astro_type_script_index_0_lang.0f22gRsq.js"></script> </header> <div class="relative z-0">  <main class="has-sidebar"> <aside id="violentmonkey/sidebar" data-astro-cid-ssfzsv2f><a href="#" rel="external" class="backdrop" data-astro-cid-ssfzsv2f>
Close
</a><ul class="list-none h-full p-4 overflow-y-auto" data-astro-cid-ssfzsv2f><li data-astro-cid-ssfzsv2f><a href="/api/gm/" class="active" data-astro-cid-ssfzsv2f>Privileged APIs</a></li><li data-astro-cid-ssfzsv2f><a href="/api/metadata-block/" class data-astro-cid-ssfzsv2f>Metadata Block</a></li><li data-astro-cid-ssfzsv2f><a href="/api/matching/" class data-astro-cid-ssfzsv2f>Matching</a></li></ul></aside> <h1 class="grid-col-start-2 mt-0 pt-8">Privileged APIs</h1> <div class="toc grid-col-start-3 grid-row-start-2"><ul><li style="--toc-depth:0"><a href="#unsafewindow">unsafeWindow</a></li><li style="--toc-depth:0"><a href="#gm_">GM_*</a></li><li style="--toc-depth:1"><a href="#gm_info">GM_info</a></li><li style="--toc-depth:1"><a href="#gm_getvalue">GM_getValue</a></li><li style="--toc-depth:1"><a href="#gm_getvalues">GM_getValues</a></li><li style="--toc-depth:1"><a href="#gm_setvalue">GM_setValue</a></li><li style="--toc-depth:1"><a href="#gm_setvalues">GM_setValues</a></li><li style="--toc-depth:1"><a href="#gm_deletevalue">GM_deleteValue</a></li><li style="--toc-depth:1"><a href="#gm_deletevalues">GM_deleteValues</a></li><li style="--toc-depth:1"><a href="#gm_listvalues">GM_listValues</a></li><li style="--toc-depth:1"><a href="#gm_addvaluechangelistener">GM_addValueChangeListener</a></li><li style="--toc-depth:1"><a href="#gm_removevaluechangelistener">GM_removeValueChangeListener</a></li><li style="--toc-depth:1"><a href="#gm_getresourcetext">GM_getResourceText</a></li><li style="--toc-depth:1"><a href="#gm_getresourceurl">GM_getResourceURL</a></li><li style="--toc-depth:1"><a href="#gm_addelement">GM_addElement</a></li><li style="--toc-depth:1"><a href="#gm_addstyle">GM_addStyle</a></li><li style="--toc-depth:1"><a href="#gm_openintab">GM_openInTab</a></li><li style="--toc-depth:1"><a href="#gm_registermenucommand">GM_registerMenuCommand</a></li><li style="--toc-depth:1"><a href="#gm_unregistermenucommand">GM_unregisterMenuCommand</a></li><li style="--toc-depth:1"><a href="#gm_notification">GM_notification</a></li><li style="--toc-depth:1"><a href="#gm_setclipboard">GM_setClipboard</a></li><li style="--toc-depth:1"><a href="#gm_xmlhttprequest">GM_xmlhttpRequest</a></li><li style="--toc-depth:1"><a href="#gm_download">GM_download</a></li><li style="--toc-depth:0"><a href="#gm">GM.*</a></li></ul><hr class="lg:hidden"></div><script type="module" src="/_astro/ToC.astro_astro_type_script_index_0_lang.Cc0lKERm.js"></script> <section class="grid-col-start-2"> <article class="flex-1 min-w-0">  <p>Violentmonkey APIs are derived from those in Greasemonkey v3, and most of them work the same way, <code>GM.*</code> <a href="https://wiki.greasespot.net/Greasemonkey_Manual:API">Greasemonkey v4-compatible</a> aliases were added in VM2.12.0.</p>
<h2 id="unsafewindow">unsafeWindow</h2>
<p><code>unsafeWindow</code> is the actual <code>window</code> object of the page.</p>
<p>It is useful when <a href="/api/metadata-block/#grant"><code>@grant</code></a> is declared with anything other than <code>none</code>.</p>
<ul>
<li>
<p>If <code>@grant none</code> is declared, or no <code>@grant</code> is declared at all:</p>
<p>Sandbox is disabled, meaning the script can add/modify globals directly without the need to use <code>unsafeWindow</code>.</p>
<ul>
<li><strong>window</strong>: the original <code>window</code> object</li>
<li><strong>unsafeWindow</strong>: the original <code>window</code> object</li>
</ul>
</li>
<li>
<p>If any API is declared with <code>@grant</code>:</p>
<p>Sandbox is enabled, meaning the script is executed in an isolated context where <code>window</code> is a wrapper of the original <code>window</code> object. So you might need <code>unsafeWindow</code> if you want to modify a global variable.</p>
<ul>
<li><strong>window</strong>: a wrapper of the original <code>window</code> object, adding a new attribute to <code>window</code> does not work if it is expected to be accessed by a script in the original world</li>
<li><strong>unsafeWindow</strong>: the original <code>window</code> object</li>
</ul>
</li>
</ul>
<h2 id="gm_">GM_*</h2>
<p><code>GM_*</code> are a group of special APIs provided by Violentmonkey.</p>
<h3 id="gm_info">GM_info</h3>
<p>An object that exposes information about the current userscript.</p>
<ul><li><p><strong>injectInto</strong>: <span class="italic text-gray-500">"auto" | "page" | "content"</span></p><p>The injection mode of current script. See <a href="https://violentmonkey.github.io/api/metadata-block/#inject-into"><code>@inject-into</code></a> for more information.</p>
</li><li><p><strong>isIncognito</strong>: <span class="italic text-gray-500">boolean</span></p><p>True when this is an incognito profile (Chrome) or private mode (Firefox).</p>
<p><span class="italic text-green-600">@since</span> VM2.15.4</p>
</li><li><p><strong>platform</strong>: <span class="italic text-gray-500">VMScriptGMInfoPlatform</span></p><p>Unlike <code>navigator.userAgent</code>, which can be overriden by other extensions/userscripts
or by devtools in device-emulation mode, <code>GM_info.platform</code> is more reliable as the
data is obtained in the background page of Violentmonkey using a specialized
extension API (<code>browser.runtime.getPlatformInfo</code> and <code>getBrowserInfo</code>).</p>
<ul><li><p><strong>arch</strong>: <span class="italic text-gray-500">"aarch64" | "arm" | "arm64" | "mips" | "mips64" | "ppc64" | "s390x" | "sparc64" | "x86-32" | "x86-64"</span></p></li><li><p><strong>browserName</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>browserVersion</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>fullVersionList</strong>?: <span class="italic text-gray-500">Array&lt;{...}></span></p><p>A copy of <code>navigator.userAgentData.getHighEntropyValues()</code> from the background script
of the extension, so it&#39;s not affected by devtools of the web page tab.
Only present in browsers that implement this API (Chromium &gt;= 90).</p>
<p><span class="italic text-green-600">@since</span> VM2.27.0</p>
<ul><li><p><strong>brand</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>version</strong>: <span class="italic text-gray-500">string</span></p></li></ul></li><li><p><strong>mobile</strong>?: <span class="italic text-gray-500">boolean</span></p><p>A copy of <code>navigator.userAgentData.mobile</code> from the background script of the extension,
so it&#39;s not affected by devtools of the web page tab.
Only present in browsers that implement this API (Chromium &gt;= 90).</p>
<p><span class="italic text-green-600">@since</span> VM2.27.0</p>
</li><li><p><strong>os</strong>: <span class="italic text-gray-500">"mac" | "win" | "android" | "cros" | "linux" | "openbsd" | "fuchsia"</span></p></li></ul></li><li><p><strong>script</strong>: <span class="italic text-gray-500">VMScriptGMInfoScriptMeta</span></p><p>Contains structured fields from the <a href="https://violentmonkey.github.io/api/metadata-block/">Metadata Block</a>.</p>
<ul><li><p><strong>antifeature</strong>?: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>author</strong>?: <span class="italic text-gray-500">string</span></p></li><li><p><strong>compatible</strong>?: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>connect</strong>?: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>description</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>downloadURL</strong>?: <span class="italic text-gray-500">string</span></p></li><li><p><strong>excludeMatches</strong>: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>excludes</strong>: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>grant</strong>: <span class="italic text-gray-500">Array&lt;string></span></p><p>Empty is the same as <code>@grant none</code></p>
</li><li><p><strong>homepage</strong>?: <span class="italic text-gray-500">string</span></p><p>Use homepageURL instead</p>
</li><li><p><strong>homepageURL</strong>?: <span class="italic text-gray-500">string</span></p></li><li><p><strong>icon</strong>?: <span class="italic text-gray-500">string</span></p></li><li><p><strong>includes</strong>: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>matches</strong>: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>name</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>namespace</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>noframes</strong>?: <span class="italic text-gray-500">boolean</span></p></li><li><p><strong>options</strong>: <span class="italic text-gray-500">{...}</span></p><p>User options and overrides for the script</p>
<p><span class="italic text-green-600">@since</span> VM2.31.1</p>
<ul><li><p><strong>check_for_updates</strong>: <span class="italic text-gray-500">boolean</span></p></li><li><p><strong>inject_into</strong>: <span class="italic text-gray-500">"auto" | "page" | "content"</span></p></li><li><p><strong>noframes</strong>: <span class="italic text-gray-500">boolean</span></p></li><li><p><strong>override</strong>: <span class="italic text-gray-500">{...}</span></p><ul><li><p><strong>merge_exclude_matches</strong>: <span class="italic text-gray-500">boolean</span></p><p>Keep the script&#39;s <code>@exclude-match</code></p>
</li><li><p><strong>merge_excludes</strong>: <span class="italic text-gray-500">boolean</span></p><p>Keep the script&#39;s <code>@exclude</code></p>
</li><li><p><strong>merge_includes</strong>: <span class="italic text-gray-500">boolean</span></p><p>Keep the script&#39;s <code>@include</code></p>
</li><li><p><strong>merge_matches</strong>: <span class="italic text-gray-500">boolean</span></p><p>Keep the script&#39;s <code>@match</code></p>
</li><li><p><strong>use_exclude_matches</strong>: <span class="italic text-gray-500">Array&lt;string></span></p><p>User overridden <code>@exclude-match</code></p>
</li><li><p><strong>use_excludes</strong>: <span class="italic text-gray-500">Array&lt;string></span></p><p>User overridden <code>@exclude</code></p>
</li><li><p><strong>use_includes</strong>: <span class="italic text-gray-500">Array&lt;string></span></p><p>User overridden <code>@include</code></p>
</li><li><p><strong>use_matches</strong>: <span class="italic text-gray-500">Array&lt;string></span></p><p>User overridden <code>@match</code></p>
</li></ul></li><li><p><strong>run_at</strong>: <span class="italic text-gray-500">"document-start" | "document-body" | "document-end" | "document-idle"</span></p></li><li><p><strong>tags</strong>: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>user_modified</strong>: <span class="italic text-gray-500">number</span></p><p>Last modification by the user; convertible as <code>new Date(user_modified)</code></p>
</li></ul></li><li><p><strong>require</strong>: <span class="italic text-gray-500">Array&lt;string></span></p></li><li><p><strong>resources</strong>: <span class="italic text-gray-500">Array&lt;{...}></span></p><ul><li><p><strong>name</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>url</strong>: <span class="italic text-gray-500">string</span></p></li></ul></li><li><p><strong>runAt</strong>: <span class="italic text-gray-500">"" | "document-start" | "document-body" | "document-end" | "document-idle"</span></p></li><li><p><strong>supportURL</strong>?: <span class="italic text-gray-500">string</span></p></li><li><p><strong>unwrap</strong>?: <span class="italic text-gray-500">boolean</span></p></li><li><p><strong>updateURL</strong>?: <span class="italic text-gray-500">string</span></p></li><li><p><strong>version</strong>: <span class="italic text-gray-500">string</span></p></li></ul></li><li><p><strong>scriptHandler</strong>: <span class="italic text-gray-500">string</span></p><p>The name of userscript manager, which should be the string <code>Violentmonkey</code>.</p>
</li><li><p><strong>scriptMetaStr</strong>: <span class="italic text-gray-500">string</span></p><p>The meta block of the script.</p>
</li><li><p><strong>scriptWillUpdate</strong>: <span class="italic text-gray-500">boolean</span></p><p>Whether the script will be updated automatically.</p>
</li><li><p><strong>userAgent</strong>: <span class="italic text-gray-500">string</span></p><p>A safe copy of <code>navigator.userAgent</code> from the content script of the extension,
so it cannot be overridden by other extensions/userscripts, but unlike
<code>GM_info.platform</code> it can be customized in devtools “device emulation” or
“network conditions” for this tab.</p>
<p><span class="italic text-green-600">@since</span> VM2.20.2</p>
</li><li><p><strong>userAgentData</strong>?: <span class="italic text-gray-500">{...}</span></p><p>A safe copy of <code>navigator.userAgentData</code> from the content script of the extension,
so it cannot be overridden by other extensions/userscripts, but unlike
<code>GM_info.platform</code> it can be customized in devtools &quot;device emulation&quot; or
&quot;network conditions&quot; for this tab.</p>
<p>Only present if the browser actually implements it
(<a href="https://caniuse.com/mdn-api_navigator_useragentdata">currently</a> Chromium-based 90+),
because there&#39;s no reliable/official polyfill.</p>
<p>Violentmonkey implements the <a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorUAData">official API</a>,
including <a href="https://developer.mozilla.org/en-US/docs/Web/API/NavigatorUAData/getHighEntropyValues">getHighEntropyValues</a>
function to obtain the extra info asynchronously.</p>
<p><span class="italic text-green-600">@since</span> VM2.20.2</p>
<ul><li><p><strong>brands</strong>: <span class="italic text-gray-500">Array&lt;{...}></span></p><ul><li><p><strong>brand</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>version</strong>: <span class="italic text-gray-500">string</span></p></li></ul></li><li><p><strong>mobile</strong>: <span class="italic text-gray-500">boolean</span></p></li><li><p><strong>platform</strong>: <span class="italic text-gray-500">string</span></p></li><li><p><strong>getHighEntropyValues</strong>: <span class="italic text-gray-500">(<strong>hints</strong>: Array&lt;string>) => Promise&lt;UADataValues></span></p></li></ul></li><li><p><strong>uuid</strong>: <span class="italic text-gray-500">string</span></p><p>A unique ID of the script.</p>
</li><li><p><strong>version</strong>: <span class="italic text-gray-500">string</span></p><p>Version of Violentmonkey.</p>
</li></ul>
<h3 id="gm_getvalue">GM_getValue</h3>
<p>Retrieves a value for current script from storage.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> value </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_getValue</span><span style="color:#24292E">(key, defaultValue)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>key</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The name for <code>value</code> to load.</p>
</li>
<li>
<span> <strong>defaultValue</strong>: <span class="italic text-gray-500">any</span>    </span>
<p>The default value to return if no value exists in the storage.</p>
</li>
</ul>
<h3 id="gm_getvalues">GM_getValues</h3>
<p><em>Since VM2.19.1</em></p>
<p>Retrieves multiple values for current script from storage.</p>
<ol>
<li>
<p><strong>Using an array of keys.</strong></p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> values </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_getValues</span><span style="color:#24292E">([</span><span style="color:#032F62">&#39;foo&#39;</span><span style="color:#24292E">, </span><span style="color:#032F62">&#39;bar&#39;</span><span style="color:#24292E">])</span></span></code></pre></figure>

















<table><thead><tr><th>Keys in storage</th><th>Result</th></tr></thead><tbody><tr><td>foo, bar</td><td><code>{ foo: 123, bar: [1, 2, 3] }</code></td></tr><tr><td>foo</td><td><code>{ foo: 123 }</code></td></tr></tbody></table>
</li>
<li>
<p><strong>Using an object.</strong></p>
<p>Each key is a name to read from storage, the value is the default to be used in the result if the key was not in storage.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> values </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_getValues</span><span style="color:#24292E">({ foo: </span><span style="color:#005CC5">1</span><span style="color:#24292E">, bar: [</span><span style="color:#005CC5">2</span><span style="color:#24292E">] })</span></span></code></pre></figure>

















<table><thead><tr><th>Keys in storage</th><th>Result</th></tr></thead><tbody><tr><td>foo, bar</td><td><code>{ foo: 123, bar: [1, 2, 3] }</code></td></tr><tr><td>foo</td><td><code>{ foo: 123, bar: [2] }</code></td></tr></tbody></table>
</li>
</ol>
<h3 id="gm_setvalue">GM_setValue</h3>
<p>Sets a key / value pair for current script to storage.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_setValue</span><span style="color:#24292E">(key, value)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>key</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The unique name for <code>value</code> within this script.</p>
</li>
<li>
<span> <strong>value</strong>: <span class="italic text-gray-500">any</span>    </span>
<p>The value to be stored, which must be <em>JSON serializable</em> (string, number, boolean, null, or an array/object consisting of these types) so for example you can’t store DOM elements or objects with cyclic dependencies.</p>
</li>
</ul>
<h3 id="gm_setvalues">GM_setValues</h3>
<p><em>Since VM2.19.1</em></p>
<p>Writes multiple values to current script’s storage.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_setValues</span><span style="color:#24292E">({ foo: </span><span style="color:#005CC5">1</span><span style="color:#24292E">, bar: [</span><span style="color:#005CC5">1</span><span style="color:#24292E">, </span><span style="color:#005CC5">2</span><span style="color:#24292E">, </span><span style="color:#005CC5">3</span><span style="color:#24292E">] })</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>data</strong>: <span class="italic text-gray-500">Object</span>    </span>
<p>Each <code>key:value</code> pair in the object will be stored individually, so the example above is basically a more efficient version of <code>GM_setValue(&#39;foo&#39;, 1); GM_setValue(&#39;bar&#39;, [1, 2, 3]);</code></p>
<p>Must be <em>JSON serializable</em> (see <a href="#gm_setvalue">GM_setValue</a>).</p>
</li>
</ul>
<h3 id="gm_deletevalue">GM_deleteValue</h3>
<p>Deletes an existing key / value pair for current script from storage.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_deleteValue</span><span style="color:#24292E">(key)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>key</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The unique name for <code>value</code> within this script.</p>
</li>
</ul>
<h3 id="gm_deletevalues">GM_deleteValues</h3>
<p><em>Since VM2.19.1</em></p>
<p>Deletes values with the specified keys in current script’s storage.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_deleteValues</span><span style="color:#24292E">([</span><span style="color:#032F62">&#39;foo&#39;</span><span style="color:#24292E">, </span><span style="color:#032F62">&#39;bar&#39;</span><span style="color:#24292E">])</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>keys</strong>: <span class="italic text-gray-500">string[]</span>    </span>
<p>Array of keys to delete.</p>
</li>
</ul>
<h3 id="gm_listvalues">GM_listValues</h3>
<p>Returns an array of keys of all available values within this script.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> arrayOfKeys </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_listValues</span><span style="color:#24292E">()</span></span></code></pre></figure>
<h3 id="gm_addvaluechangelistener">GM_addValueChangeListener</h3>
<p>Adds a change listener to the storage and returns the listener ID.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> listenerId </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addValueChangeListener</span><span style="color:#24292E">(name, callback)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>name</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The name of the observed variable</p>
</li>
<li>
<span> <strong>callback</strong>: <span class="italic text-gray-500">(name, oldValue, newValue, remote) =&gt; void</span>    </span>
<ul>
<li>
<span> <strong>name</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The name of the observed variable</p>
</li>
<li>
<span> <strong>oldValue</strong>: <span class="italic text-gray-500">any</span>    </span>
<p>The old value of the observed variable (<code>undefined</code> if it was created)</p>
</li>
<li>
<span> <strong>newValue</strong>: <span class="italic text-gray-500">any</span>    </span>
<p>The new value of the observed variable (<code>undefined</code> if it was deleted)</p>
</li>
<li>
<span> <strong>remote</strong>: <span class="italic text-gray-500">boolean</span>    </span>
<p><code>true</code> if modified by the userscript instance of another tab or <code>false</code> for this script instance. Can be used by scripts of different browser tabs to communicate with each other.</p>
</li>
</ul>
</li>
</ul>
<h3 id="gm_removevaluechangelistener">GM_removeValueChangeListener</h3>
<p>Removes a change listener by its ID.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_removeValueChangeListener</span><span style="color:#24292E">(listenerId)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>listenerId</strong>: <span class="italic text-gray-500">string</span>    </span>
</li>
</ul>
<h3 id="gm_getresourcetext">GM_getResourceText</h3>
<p>Retrieves a text resource from the metadata block.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> text </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_getResourceText</span><span style="color:#24292E">(name)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>name</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Name of a resource defined in the <a href="../metadata-block/#resource">metadata block</a>.</p>
</li>
</ul>
<h3 id="gm_getresourceurl">GM_getResourceURL</h3>
<p>Retrieves a <code>blob:</code> or <code>data:</code> URL of a resource from the metadata block.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> blobUrl </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_getResourceURL</span><span style="color:#24292E">(name);</span></span>
<span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> blobOrDataUrl </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_getResourceURL</span><span style="color:#24292E">(name, isBlobUrl);</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>name</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Name of a resource defined in the <a href="../metadata-block/#resource">metadata block</a>.</p>
</li>
<li>
<span> <strong>isBlobUrl</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = true</span>  <span class="ml-2">- since VM2.13.1</span> </span>
<ul>
<li>
<p><code>true</code> returns a <code>blob:</code> URL. It’s short and cacheable, so it’s good for reusing in multiple DOM elements.</p>
</li>
<li>
<p><code>false</code> returns a <code>data:</code> URL. It’s long so reusing it in DOM may be less performant due to the lack of caching, but it’s particularly handy for direct synchronous decoding of the data on sites that forbid fetching <code>blob:</code> in their CSP.</p>
</li>
</ul>
</li>
</ul>
<p>Note: when setting this URL as <code>src</code> or <code>href</code> of a DOM element, it may fail on some sites with a particularly strict CSP that forbids <code>blob:</code> or <code>data:</code> URLs. Such sites are rare though. The workaround in Chrome is to use <code>GM_addElement</code>, whereas in Firefox you’ll have to disable CSP either globally via <code>about:config</code> or by using an additional extension that modifies HTTP headers selectively.</p>
<h3 id="gm_addelement">GM_addElement</h3>
<p><em>Since VM2.13.1</em></p>
<p>Appends and returns an element with the specified attributes with the primary purpose of circumventing a strict <code>Content-Security-Policy</code> that forbids adding inline code or style.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> element1 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addElement</span><span style="color:#24292E">(tagName, attributes);</span></span>
<span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> element2 </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addElement</span><span style="color:#24292E">(parentNode, tagName, attributes);</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>parentNode?</strong>: <span class="italic text-gray-500">Node | Element | ShadowRoot</span>    </span>
<p>The parent node to which the new node will be appended.</p>
<p>It can be inside ShadowDOM: <code>someElement.shadowRoot</code>.</p>
<p>When omitted, it’ll be determined automatically:</p>
<ol>
<li><code>document.head</code> (<code>&lt;head&gt;</code>) for <code>script</code>, <code>link</code>, <code>style</code>, <code>meta</code> tags.</li>
<li><code>document.body</code> (<code>&lt;body&gt;</code>) for other tags or when there’s no <code>&lt;head&gt;</code>.</li>
<li><code>document.documentElement</code> (<code>&lt;html&gt;</code> or an XML root node) otherwise.</li>
</ol>
</li>
<li>
<span> <strong>tagName</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>A tag name like <code>&#39;script&#39;</code>.</p>
</li>
<li>
<span> <strong>attributes?</strong>: <span class="italic text-gray-500">object</span>    </span>
<p>The keys are HTML attributes, not DOM properties, except <code>textContent</code> which sets DOM property <code>textContent</code>. The values are strings so if you want to assign a private function to <code>onload</code> you can do it after the element is created.</p>
</li>
</ul>
<p>Examples:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// using a private function in `onload`</span></span>
<span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> el </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addElement</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;script&#39;</span><span style="color:#24292E">, { src: </span><span style="color:#032F62">&#39;https://....&#39;</span><span style="color:#24292E"> });</span></span>
<span data-line><span style="color:#24292E">el.</span><span style="color:#6F42C1">onload</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> () </span><span style="color:#D73A49">=&gt;</span><span style="color:#24292E"> console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;loaded&#39;</span><span style="color:#24292E">, el);</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// same as GM_addStyle(&#39;a { color:red }&#39;)</span></span>
<span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> el </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addElement</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;style&#39;</span><span style="color:#24292E">, { textContent: </span><span style="color:#032F62">&#39;a { color:red }&#39;</span><span style="color:#24292E"> });</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// appending to an arbitrary node</span></span>
<span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> el </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addElement</span><span style="color:#24292E">(parentElement.shadowRoot, </span><span style="color:#032F62">&#39;iframe&#39;</span><span style="color:#24292E">, { src: url });</span></span></code></pre></figure>
<p>Notes:</p>
<ul>
<li>The element is returned immediately (synchronously) even with <code>GM.addElement</code>, no need for <code>.then()</code>, but you can use it if you want, just once though as it’s auto-removed to avoid recursion. The API is synchronous because Violentmonkey runs scripts only when the root element appears, so there’s always a node to serve as a parent.</li>
<li>Invalid arguments will raise an exception, which can be caught using <code>try {} catch (e) {}</code>, just like standard DOM API <code>document.createElement</code>.</li>
</ul>
<h3 id="gm_addstyle">GM_addStyle</h3>
<p>Appends and returns a <code>&lt;style&gt;</code> element with the specified CSS.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> styleElement </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_addStyle</span><span style="color:#24292E">(css);</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>css</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The CSS code to inject.</p>
</li>
</ul>
<p>Older versions of Violentmonkey (prior to 2.12.0) returned an imitation of Promise,
which is still maintained for compatibility, so don’t be surprised if you see code like
<code>GM_addStyle(css).then(el =&gt; { /* whatever */ });</code></p>
<h3 id="gm_openintab">GM_openInTab</h3>
<p>Opens URL in a new tab.</p>
<ol>
<li>
<p>using an object</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> tabControl </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_openInTab</span><span style="color:#24292E">(url, options)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>url</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The URL to open in a new tab. URL relative to current page is also allowed.</p>
<p>Note that <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/tabs/create#:~:text=security%20reasons">Firefox disallows</a> <code>data:</code>, <code>blob:</code>, <code>chrome:</code>, <code>file:</code>, and many <code>about:</code> URLs.</p>
</li>
<li>
<span> <strong>options?</strong>: <span class="italic text-gray-500">object</span>    </span>
<ul>
<li>
<span> <strong>active</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = true</span>   </span>
<p>Make the new tab active (i.e. open in foreground).</p>
</li>
<li>
<span> <strong>container?</strong>: <span class="italic text-gray-500">number</span>   <span class="ml-2">- since VM2.12.5, Firefox-only</span> </span>
<p>Set <a href="https://wiki.mozilla.org/Security/Contextual_Identity_Project/Containers">tab’s container</a> in Firefox:</p>
<ul>
<li>not specified = reuse script’s tab container</li>
<li><code>0</code> = default (main) container</li>
<li><code>1</code>, <code>2</code>, etc. = internal container index</li>
</ul>
</li>
<li>
<span> <strong>insert</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = true</span>  <span class="ml-2">- since VM2.11.0</span> </span>
<p>Insert the new tab next to the current tab and set its “openerTab” so when it’s closed the original tab will be focused automatically. When <code>false</code> or not specified, the usual browser behavior is to open the tab at the end of the tab list.</p>
</li>
<li>
<span> <strong>pinned</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = false</span>  <span class="ml-2">- since VM2.12.5</span> </span>
<p>Pin the tab (i.e. show without a title at the beginning of the tab list).</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Using a boolean, compatible with Greasemonkey:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> tabControl </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_openInTab</span><span style="color:#24292E">(url, openInBackground)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>openInBackground</strong>: <span class="italic text-gray-500">boolean</span>    </span>
<p>Open the tab in background.
Note, this is a reverse of the first usage method so for example <code>true</code> is the same as <code>{ active: false }</code>.</p>
</li>
</ul>
</li>
</ol>
<p>Returns an object with following properties:</p>
<ul>
<li>
<span> <strong>onclose?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>Сan be assigned to a function. If provided, it will be called when the opened tab is closed.</p>
</li>
<li>
<span> <strong>closed</strong>: <span class="italic text-gray-500">boolean</span>    </span>
<p>Whether the opened tab is closed.</p>
</li>
<li>
<span> <strong>close</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>A function to explicitly close the opened tab.</p>
</li>
</ul>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> tabControl </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_openInTab</span><span style="color:#24292E">(url);</span></span>
<span data-line><span style="color:#24292E">tabControl.</span><span style="color:#6F42C1">onclose</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> () </span><span style="color:#D73A49">=&gt;</span><span style="color:#24292E"> console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;tab is closed&#39;</span><span style="color:#24292E">);</span></span>
<span data-line><span style="color:#24292E">tabControl.</span><span style="color:#6F42C1">close</span><span style="color:#24292E">();</span></span></code></pre></figure>
<h3 id="gm_registermenucommand">GM_registerMenuCommand</h3>
<p>Registers a command in Violentmonkey popup menu.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Text&#39;</span><span style="color:#24292E">, onClick)</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> id2</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Text2&#39;</span><span style="color:#24292E">, onClick, { title: </span><span style="color:#032F62">&#39;Two&#39;</span><span style="color:#24292E"> })</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> id3</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Text3&#39;</span><span style="color:#24292E">, onClick, { autoClose: </span><span style="color:#005CC5">false</span><span style="color:#24292E"> })</span></span></code></pre></figure>
<p>Returns the command’s <code>caption</code> since VM2.12.5 or <code>id</code> since VM2.15.9.</p>
<ul>
<li>
<span> <strong>caption</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>This text will be shown in the popup menu.</p>
</li>
<li>
<span> <strong>onClick</strong>: <span class="italic text-gray-500">(event) =&gt; void</span>    </span>
<p>When the command is clicked in the menu, this function will run with the following parameter:</p>
<ul>
<li><span> <strong>event</strong>: <span class="italic text-gray-500">[object Object]</span>   <span class="ml-2">- since VM2.13.1</span> </span> is the event that activated the command so you can check <code>event.button</code>, <code>event.shiftKey</code>, <code>event.key</code>, and so on.</li>
</ul>
</li>
<li>
<span> <strong>options?</strong>: <span class="italic text-gray-500">object</span>   <span class="ml-2">- since VM2.15.9</span> </span>
<ul>
<li>
<span> <strong>id?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Default: <code>caption</code> text since VM2.16.2.
Default in 2.15.9-2.16.1: a randomly generated string.</p>
</li>
<li>
<span> <strong>icon?</strong>: <span class="italic text-gray-500">string</span>   <span class="ml-2">- since VM2.31.1</span> </span>
<p>URL of the icon.</p>
</li>
<li>
<span> <strong>title?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>A hint shown in the status bar when hovering the command.</p>
</li>
<li>
<span> <strong>autoClose?</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = true</span>   </span>
<p>Whether to auto-close the popup after the user invoked the command.</p>
</li>
</ul>
</li>
</ul>
<div class="markdown-alert markdown-alert-tip" dir="auto">
<p class="markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg>TIP</p>
<p></p>
<p>If you want to add a shortcut, please refer to <a href="/guide/keyboard-shortcuts/#shortcut-for-menu-command">keyboard shortcut</a>.</p>
</div>
<p>Here’s how you can change the command in-place, thus preserving its relative position in the list of multiple commands:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> id</span><span style="color:#D73A49"> =</span><span style="color:#032F62"> &#39;status&#39;</span><span style="color:#24292E">;</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> inplace</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> id </span><span style="color:#D73A49">===</span><span style="color:#6F42C1"> GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Enabled&#39;</span><span style="color:#24292E">, onClick, { id });</span></span>
<span data-line><span style="color:#D73A49">if</span><span style="color:#24292E"> (inplace) {</span></span>
<span data-line><span style="color:#6A737D">  // supported: change the command in-place using the same `id`</span></span>
<span data-line><span style="color:#6F42C1">  GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Disabled&#39;</span><span style="color:#24292E">, onClick, { id, title: </span><span style="color:#032F62">&#39;Status&#39;</span><span style="color:#24292E"> });</span></span>
<span data-line><span style="color:#24292E">} </span><span style="color:#D73A49">else</span><span style="color:#24292E"> {</span></span>
<span data-line><span style="color:#6A737D">  // not supported: recreate the commands</span></span>
<span data-line><span style="color:#6F42C1">  GM_unregisterMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Enabled&#39;</span><span style="color:#24292E">);</span></span>
<span data-line><span style="color:#6F42C1">  GM_unregisterMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Foo&#39;</span><span style="color:#24292E">);</span></span>
<span data-line><span style="color:#6F42C1">  GM_unregisterMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Bar&#39;</span><span style="color:#24292E">);</span></span>
<span data-line><span style="color:#6F42C1">  GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Disabled&#39;</span><span style="color:#24292E">, onClick);</span></span>
<span data-line><span style="color:#6F42C1">  GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Foo&#39;</span><span style="color:#24292E">, onClick2);</span></span>
<span data-line><span style="color:#6F42C1">  GM_registerMenuCommand</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;Bar&#39;</span><span style="color:#24292E">, onClick3);</span></span>
<span data-line><span style="color:#24292E">}</span></span></code></pre></figure>
<h3 id="gm_unregistermenucommand">GM_unregisterMenuCommand</h3>
<p>Unregisters a command which has been registered to Violentmonkey popup menu.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_unregisterMenuCommand</span><span style="color:#24292E">(captionOrId)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>captionOrId</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The caption or id of the command to unregister.
See <a href="#gm_registermenucommand">GM_registerMenuCommand</a> for more info.</p>
</li>
</ul>
<h3 id="gm_notification">GM_notification</h3>
<p>Shows a desktop notification using the <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/API/notifications">browser.notifications API</a>.</p>
<ol>
<li>
<p>using an object:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> control </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_notification</span><span style="color:#24292E">(options)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>options</strong>: <span class="italic text-gray-500">object</span>    </span>
<ul>
<li>
<span> <strong>text</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Main text of the notification.</p>
</li>
<li>
<span> <strong>title?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Title of the notification.</p>
</li>
<li>
<span> <strong>image?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>URL of an image to show in the notification.</p>
</li>
<li>
<span> <strong>silent?</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = false</span>  <span class="ml-2">- since VM2.15.2, Chrome 70</span> </span>
<p>No sounds/vibrations when showing the notification. Only for Chromium-based browsers as of Aug 2023.</p>
</li>
<li>
<span> <strong>tag?</strong>: <span class="italic text-gray-500">string</span>   <span class="ml-2">- since VM2.15.4</span> </span>
<p>Unique name of the notification, e.g. ‘abc’, same as the web Notification API. Names are scoped to each userscript i.e. your tag won’t clash with another script’s tag.</p>
<p>The purpose of a tagged notification is to replace an older notification with the same tag, even if it was shown in another tab (or before this tab was navigated elsewhere and your notification had <code>zombieTimeout</code>).</p>
</li>
<li>
<span> <strong>zombieTimeout?</strong>: <span class="italic text-gray-500">number</span> <span class="text-green-600"> = 0</span>  <span class="ml-2">- since VM2.15.4</span> </span>
<p>Number of milliseconds to keep the notification after the userscript “dies”, i.e. when its tab or frame is reloaded/closed/navigated. If not specified or invalid, the default behavior is to immediately remove the notifications.</p>
</li>
<li>
<span> <strong>zombieUrl?</strong>: <span class="italic text-gray-500">string</span>   <span class="ml-2">- since VM2.16.1</span> </span>
<p>URL to open when a zombie notification is clicked, see <code>zombieTimeout</code> for more info.</p>
</li>
<li>
<span> <strong>onclick?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>Callback when the notification is clicked by user. As of VM2.15.2 it also forces the notification to be visible until clicked in Chrome which by default hides the notification after a few seconds.</p>
</li>
<li>
<span> <strong>ondone?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>Callback when the notification is closed, either by user or by system.</p>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>Using separate parameters, compatible with Greasemonkey:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_notification</span><span style="color:#24292E">(text, title, image, onclick)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>text</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Main text of the notification.</p>
</li>
<li>
<span> <strong>title?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Title of the notification.</p>
</li>
<li>
<span> <strong>image?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>URL of an image to show in the notification.</p>
</li>
<li>
<span> <strong>onclick?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>Callback when the notification is clicked by user.</p>
</li>
</ul>
</li>
</ol>
<p><strong>As of VM2.12.8</strong> returns a control object with the following properties:</p>
<ul>
<li>
<span> <strong>remove</strong>: <span class="italic text-gray-500">() =&gt; Promise&lt;void&gt;</span>    </span>
<p>A function to remove the notification.</p>
</li>
</ul>
<h3 id="gm_setclipboard">GM_setClipboard</h3>
<p>Sets data to system clipboard.</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_setClipboard</span><span style="color:#24292E">(data, type)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>data</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The data to be copied to system clipboard.</p>
</li>
<li>
<span> <strong>type</strong>: <span class="italic text-gray-500">string</span> <span class="text-green-600"> = &#39;text/plain&#39;</span>   </span>
<p>The MIME type of data to copy.</p>
</li>
</ul>
<h3 id="gm_xmlhttprequest">GM_xmlhttpRequest</h3>
<p>Makes a request like XMLHttpRequest, with some special capabilities, not restricted by same-origin policy.</p>
<p>Note: <code>h</code> is lowercase (the historical spelling).</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#D73A49">let</span><span style="color:#24292E"> control </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> GM_xmlhttpRequest</span><span style="color:#24292E">(details)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>details</strong>: <span class="italic text-gray-500">object</span>    </span>
<ul>
<li>
<span> <strong>url</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>URL relative to current page is also allowed.</p>
</li>
<li>
<span> <strong>method?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Usually <code>GET</code>.</p>
</li>
<li>
<span> <strong>user?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>User for authentication.</p>
</li>
<li>
<span> <strong>password?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>Password for authentication.</p>
</li>
<li>
<span> <strong>overrideMimeType?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>A MIME type to specify with the request.</p>
</li>
<li>
<span> <strong>headers?</strong>: <span class="italic text-gray-500">object</span>    </span>
<p>For example <code>{ &#39;name1&#39;: &#39;value1&#39;, &#39;name2&#39;: &#39;value2&#39; }</code>.</p>
<p>Some special headers are also allowed:</p>
<ul>
<li><code>&#39;Cookie&#39;</code></li>
<li><code>&#39;Host&#39;</code></li>
<li><code>&#39;Origin&#39;</code></li>
<li><code>&#39;Referer&#39;</code></li>
<li><code>&#39;User-Agent&#39;</code></li>
</ul>
</li>
<li>
<span> <strong>responseType?</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>One of the following:</p>
<ul>
<li><code>&#39;text&#39;</code> :point_left: default</li>
<li><code>&#39;json&#39;</code></li>
<li><code>&#39;blob&#39;</code></li>
<li><code>&#39;arraybuffer&#39;</code></li>
<li><code>&#39;document&#39;</code> <em>(since VM2.12.0)</em></li>
</ul>
</li>
<li>
<span> <strong>timeout?</strong>: <span class="italic text-gray-500">number</span>   <span class="ml-2">- since VM2.9.5</span> </span>
<p>Time to wait for the request, none by default.</p>
</li>
<li>
<span> <strong>data?</strong>: <span class="italic text-gray-500">string | ArrayBuffer | Blob | DataView | FormData | ReadableStream | TypedArray | URLSearchParams</span>    </span>
<p>Data to send with the request, usually for <code>POST</code> and <code>PUT</code> requests.</p>
</li>
<li>
<span> <strong>binary?</strong>: <span class="italic text-gray-500">boolean</span>   <span class="ml-2">- since VM2.12.2</span> </span>
<p>Send the <code>data</code> string as a <code>blob</code>. This is for compatibility with Tampermonkey/Greasemonkey, where only <code>string</code> type is allowed in <code>data</code>.</p>
</li>
<li>
<span> <strong>context?</strong>: <span class="italic text-gray-500">any</span>    </span>
<p>Can be an object and will be assigned to <code>context</code> of the response object.</p>
</li>
<li>
<span> <strong>anonymous?</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = false</span>  <span class="ml-2">- since VM2.10.1</span> </span>
<p>When set to <code>true</code>, no cookie will be sent with the request and since VM2.12.5 the response cookies will be ignored.</p>
<p>When absent, an inverted value of Greasemonkey4-compatible <code>withCredentials</code> is used. Note that Violentmonkey sends cookies by default, like Tampermonkey, but unlike Greasemonkey4 (same-origin <code>url</code> only).</p>
</li>
</ul>
<p>Event handlers:</p>
<ul>
<li>
<span> <strong>onabort?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onerror?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onload?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onloadend?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onloadstart?</strong>: <span class="italic text-gray-500">() =&gt; void</span>   <span class="ml-2">- since VM2.12.5</span> </span>
</li>
<li>
<span> <strong>onprogress?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onreadystatechange?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>ontimeout?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
</ul>
<p>Each event handler is a <em>function</em> that accepts one argument <code>responseObject</code></p>
</li>
</ul>
<div class="markdown-alert markdown-alert-note" dir="auto">
<p class="markdown-alert-title" dir="auto"><svg class="octicon" viewBox="0 0 16 16" width="16" height="16" aria-hidden="true"><path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8Zm8-6.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM6.5 7.75A.75.75 0 0 1 7.25 7h1a.75.75 0 0 1 .75.75v2.75h.25a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1 0-1.5h.25v-2h-.25a.75.75 0 0 1-.75-.75ZM8 6a1 1 0 1 1 0-2 1 1 0 0 1 0 2Z"></path></svg>NOTE</p>
<p></p>
<ul>
<li><code>synchronous</code> is not supported.</li>
</ul>
</div>
<p>Returns a control object with the following properties:</p>
<ul>
<li>
<span> <strong>abort</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>A function to abort the request.</p>
</li>
</ul>
<p>The response object is passed to each event handler with the following properties, most of which are identical to those provided by the standard <a href="https://developer.mozilla.org/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a>:</p>
<ul>
<li>
<span> <strong>status</strong>: <span class="italic text-gray-500">number</span>    </span>
</li>
<li>
<span> <strong>statusText</strong>: <span class="italic text-gray-500">string</span>    </span>
</li>
<li>
<span> <strong>readyState</strong>: <span class="italic text-gray-500">number</span>    </span>
</li>
<li>
<span> <strong>responseHeaders</strong>: <span class="italic text-gray-500">string</span>    </span>
</li>
<li>
<span> <strong>response</strong>: <span class="italic text-gray-500">string | Blob | ArrayBuffer | Document | object | null</span>    </span>
</li>
<li><span> <strong>responseText</strong>: <span class="italic text-gray-500">string | undefined</span>    </span>, only provided when available</li>
<li><span> <strong>responseXML</strong>: <span class="italic text-gray-500">Document | null</span>   <span class="ml-2">- since VM2.13.4</span> </span>, only provided when available</li>
<li><span> <strong>lengthComputable</strong>: <span class="italic text-gray-500">boolean</span>    </span>, only provided when available</li>
<li><span> <strong>loaded</strong>: <span class="italic text-gray-500">number</span>    </span>, only provided when available</li>
<li><span> <strong>total</strong>: <span class="italic text-gray-500">number</span>    </span>, only provided when available</li>
<li><span> <strong>finalUrl</strong>: <span class="italic text-gray-500">string</span>    </span>, the final URL after redirection</li>
<li><span> <strong>context</strong>: <span class="italic text-gray-500">any</span>    </span>, the same <code>context</code> object you specified in <code>details</code></li>
</ul>
<h3 id="gm_download">GM_download</h3>
<p><em>Since VM2.9.5</em></p>
<p>Downloads a URL to a local file.</p>
<ol>
<li>
<p>using an object:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_download</span><span style="color:#24292E">(options)</span></span></code></pre></figure>
<ul>
<li>
<p><span> <strong>options</strong>: <span class="italic text-gray-500">object</span>    </span>:</p>
<ul>
<li>
<span> <strong>url</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The URL to download.</p>
</li>
<li>
<span> <strong>name</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The filename to save to. Folders/subpaths aren’t supported yet.</p>
</li>
</ul>
<p>Most <a href="#gm_xmlhttprequest">GM_xmlhttpRequest</a> options are supported.</p>
<ul>
<li>
<span> <strong>headers?</strong>: <span class="italic text-gray-500">object</span>    </span>
</li>
<li>
<span> <strong>timeout?</strong>: <span class="italic text-gray-500">number</span>   <span class="ml-2">- since VM2.9.5</span> </span>
</li>
<li>
<span> <strong>context?</strong>: <span class="italic text-gray-500">any</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>user?</strong>: <span class="italic text-gray-500">string</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>password?</strong>: <span class="italic text-gray-500">string</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>anonymous?</strong>: <span class="italic text-gray-500">boolean</span> <span class="text-green-600"> = false</span>  <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>onabort?</strong>: <span class="italic text-gray-500">() =&gt; void</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>onerror?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onload?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onloadend?</strong>: <span class="italic text-gray-500">() =&gt; void</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>onloadstart?</strong>: <span class="italic text-gray-500">() =&gt; void</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>onprogress?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
<li>
<span> <strong>onreadystatechange?</strong>: <span class="italic text-gray-500">() =&gt; void</span>   <span class="ml-2">- since VM2.13.4</span> </span>
</li>
<li>
<span> <strong>ontimeout?</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
</li>
</ul>
<p>The <code>onload</code> event handler is called after the data is downloaded from URL, before writing the file.</p>
</li>
</ul>
</li>
<li>
<p>using separate parameters:</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6F42C1">GM_download</span><span style="color:#24292E">(url, name)</span></span></code></pre></figure>
<ul>
<li>
<span> <strong>url</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The URL to download.</p>
</li>
<li>
<span> <strong>name</strong>: <span class="italic text-gray-500">string</span>    </span>
<p>The filename to save to. Folders/subpaths aren’t supported yet.</p>
</li>
</ul>
</li>
</ol>
<p>Returns a control object with the following properties, same as <a href="#gm_xmlhttprequest">GM_xmlhttpRequest</a>:</p>
<ul>
<li>
<span> <strong>abort</strong>: <span class="italic text-gray-500">() =&gt; void</span>    </span>
<p>A function to abort the request.</p>
</li>
</ul>
<h2 id="gm">GM.*</h2>
<p><code>GM</code> <em>(since VM2.12.0)</em> is a single variable with <a href="https://wiki.greasespot.net/Greasemonkey_Manual:API">Greasemonkey4-compatible</a> aliases, the <code>async</code> functions return a <code>Promise</code> that’s resolved with the returned value.</p>
<ul>
<li>
<p><a href="#gm_addstyle">GM.addStyle</a></p>
</li>
<li>
<p><a href="#gm_addelement">GM.addElement</a> - <em>since VM2.13.1</em></p>
</li>
<li>
<p><a href="#gm_registermenucommand">GM.registerMenuCommand</a> - <em>since VM2.12.10, GM4.11</em></p>
</li>
<li>
<p><a href="#gm_deletevalue">GM.deleteValue</a> <em>(async)</em></p>
</li>
<li>
<p><a href="#gm_deletevalues">GM.deleteValues</a> <em>since VM2.19.1 (async)</em></p>
</li>
<li>
<p><a href="#gm_download">GM.download</a> <em>(async since VM2.18.3)</em></p>
</li>
<li>
<p><a href="#gm_getresourceurl">GM.getResourceUrl</a> <em>(async)</em> - in VM2.12.0…2.13.0 it was misspelled as <code>GM.getResourceURL</code></p>
</li>
<li>
<p><a href="#gm_getvalue">GM.getValue</a> <em>(async)</em></p>
</li>
<li>
<p><a href="#gm_getvalues">GM.getValues</a> <em>since VM2.19.1 (async)</em></p>
</li>
<li>
<p><a href="#gm_info">GM.info</a></p>
</li>
<li>
<p><a href="#gm_listvalues">GM.listValues</a> <em>(async)</em></p>
</li>
<li>
<p><a href="#gm_notification">GM.notification</a></p>
</li>
<li>
<p><a href="#gm_openintab">GM.openInTab</a></p>
</li>
<li>
<p><a href="#gm_setclipboard">GM.setClipboard</a></p>
</li>
<li>
<p><a href="#gm_setvalue">GM.setValue</a> <em>(async)</em></p>
</li>
<li>
<p><a href="#gm_setvalues">GM.setValues</a> <em>since VM2.19.1 (async)</em></p>
</li>
<li>
<p><a href="#gm_xmlhttprequest">GM.xmlHttpRequest</a> <em>(async since VM2.18.3)</em>, <code>H</code> is uppercase</p>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// compatible with multiple userscript managers</span></span>
<span data-line><span style="color:#005CC5">GM</span><span style="color:#24292E">.</span><span style="color:#6F42C1">xmlHttpRequest</span><span style="color:#24292E">({ url, </span><span style="color:#6F42C1">onload</span><span style="color:#24292E">: </span><span style="color:#E36209">res</span><span style="color:#D73A49"> =&gt;</span><span style="color:#24292E"> {</span><span style="color:#6A737D">/*....*/</span><span style="color:#24292E">} });</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// compatible with multiple userscript managers</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> res</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#D73A49"> new</span><span style="color:#005CC5"> Promise</span><span style="color:#24292E">((</span><span style="color:#E36209">resolve</span><span style="color:#24292E">, </span><span style="color:#E36209">reject</span><span style="color:#24292E">) </span><span style="color:#D73A49">=&gt;</span><span style="color:#24292E"> {</span></span>
<span data-line><span style="color:#005CC5">  GM</span><span style="color:#24292E">.</span><span style="color:#6F42C1">xmlHttpRequest</span><span style="color:#24292E">({ url, onload: resolve, onerror: reject });</span></span>
<span data-line><span style="color:#24292E">});</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// VM2.18.3+, TM</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> res</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#005CC5"> GM</span><span style="color:#24292E">.</span><span style="color:#6F42C1">xmlHttpRequest</span><span style="color:#24292E">({ url });</span></span></code></pre></figure>
<figure data-rehype-pretty-code-figure><pre style="background-color:#fff;color:#24292e" tabindex="0" data-language="js" data-theme="github-light"><code data-language="js" data-theme="github-light" style="display:grid"><span data-line><span style="color:#6A737D">// VM2.18.3+, TM</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> control</span><span style="color:#D73A49"> =</span><span style="color:#005CC5"> GM</span><span style="color:#24292E">.</span><span style="color:#6F42C1">xmlHttpRequest</span><span style="color:#24292E">({ url });</span></span>
<span data-line><span style="color:#24292E">myButton.</span><span style="color:#6F42C1">addEventListener</span><span style="color:#24292E">(</span><span style="color:#032F62">&#39;click&#39;</span><span style="color:#24292E">, control.abort, { once: </span><span style="color:#005CC5">true</span><span style="color:#24292E"> });</span></span>
<span data-line><span style="color:#D73A49">const</span><span style="color:#005CC5"> res</span><span style="color:#D73A49"> =</span><span style="color:#D73A49"> await</span><span style="color:#24292E"> control;</span></span></code></pre></figure>
</li>
</ul>  </article> </section> <section class="grid-col-start-2"> <hr>  </section> </main>  </div> <footer class="flex p-6 pb-16 border-t border-gray-400 lg:pb-6"> <div>Violentmonkey © All rights reserved.</div> <a class="mx-2" href="/privacy/"> Privacy Policy </a> </footer> <div data-discord data-astro-cid-mahorubk> <div class="discord-panel" data-astro-cid-mahorubk> <div class="p-2 cursor-pointer" data-discord-toggle data-astro-cid-mahorubk> <svg viewBox="0 0 12 12" class="w-4 h-4" data-astro-cid-mahorubk> <path d="M0 1L11 12L12 11L1 0zM11 0L0 11L1 12L12 1z" stroke="none" fill="currentColor" data-astro-cid-mahorubk></path> </svg> </div> <iframe class="w-full h-full bg-blue-100 rounded" data-src="https://discord.com/widget?id=995346102003965952&theme=dark" sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts" data-astro-cid-mahorubk></iframe> </div> <button class="discord-button" data-discord-toggle data-astro-cid-mahorubk> Open Chat </button> </div> <script type="module">const e=document.querySelector("[data-discord]");e&&e.addEventListener("click",r=>{if(!r.target.closest("[data-discord-toggle]"))return;e.classList.toggle("discord-open");const t=e.querySelector("iframe[data-src]");t&&!t.src&&t.dataset.src&&(t.src=t.dataset.src)});</script>  </body></html>